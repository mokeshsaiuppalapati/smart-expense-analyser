<?xml version="1.0" encoding="UTF-8"?>

<?import de.jensd.fx.glyphs.fontawesome.FontAwesomeIconView?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.chart.BarChart?>
<?import javafx.scene.chart.CategoryAxis?>
<?import javafx.scene.chart.NumberAxis?>
<?import javafx.scene.chart.PieChart?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ProgressIndicator?>
<?import javafx.scene.control.Tab?>
<?import javafx.scene.control.TabPane?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>

<BorderPane xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.expense.ui.MainController">
    <padding>
        <Insets bottom="8.0" left="8.0" right="8.0" top="8.0" />
    </padding>
    <top>
        <HBox alignment="CENTER_LEFT" spacing="8.0" BorderPane.alignment="CENTER">
            <children>
                <Label styleClass="h1" text="Smart Expense Analyzer" />
                <Region HBox.hgrow="ALWAYS" />
                <Button onAction="#onImport" styleClass="top-bar-button" text="Import...">
                    <graphic>
                        <FontAwesomeIconView glyphName="DOWNLOAD" />
                    </graphic>
                </Button>
                <Button onAction="#onExport" styleClass="top-bar-button" text="Export...">
                    <graphic>
                        <FontAwesomeIconView glyphName="UPLOAD" />
                    </graphic>
                </Button>
                <Button onAction="#onAddExpense" styleClass="top-bar-button" text="Add">
                    <graphic>
                        <FontAwesomeIconView glyphName="PLUS" />
                    </graphic>
                </Button>
                <Button onAction="#onOpenBudgets" styleClass="top-bar-button" text="Budgets">
                    <graphic>
                        <FontAwesomeIconView glyphName="MONEY" />
                    </graphic>
                </Button>
                <Button fx:id="btnRetrain" onAction="#onRetrainModel" styleClass="top-bar-button" text="Retrain">
                    <graphic>
                        <FontAwesomeIconView glyphName="REFRESH" />
                    </graphic>
                </Button>
                <ProgressIndicator fx:id="prog" prefHeight="20.0" prefWidth="20.0" visible="false" />
            </children>
            <padding>
                <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
            </padding>
        </HBox>
    </top>
    <center>
        <TabPane fx:id="mainTabPane" prefHeight="480.0" tabClosingPolicy="UNAVAILABLE" BorderPane.alignment="CENTER">
            <tabs>
                <Tab text="Dashboard">
                    <content>
                        <fx:include fx:id="dashboard" source="dashboard.fxml" />
                    </content>
                </Tab>
                <Tab text="All Transactions">
                    <content>
                        <VBox spacing="8.0">
                            <children>
                                <TableView fx:id="table" editable="true" VBox.vgrow="ALWAYS">
                                    <columns>
                                        <TableColumn fx:id="colDate" prefWidth="120.0" text="Date" />
                                        <TableColumn fx:id="colAmount" prefWidth="100.0" text="Amount" />
                                        <TableColumn fx:id="colDesc" prefWidth="240.0" text="Description" />
                                        <TableColumn fx:id="colCat" prefWidth="150.0" text="Category" />
                                    </columns>
                                </TableView>
                            </children>
                            <padding>
                                <Insets bottom="8.0" left="8.0" right="8.0" top="8.0" />
                            </padding>
                        </VBox>
                    </content>
                </Tab>
                <Tab text="Category Pie">
                    <content>
                        <VBox spacing="8.0">
                            <children>
                                <HBox alignment="CENTER_LEFT" spacing="8.0">
                                    <children>
                                        <Label text="Year:" />
                                        <ComboBox fx:id="pieYearCombo" onAction="#onPieChartFilterChanged" prefWidth="100.0" />
                                        <Label text="Month:" />
                                        <ComboBox fx:id="pieMonthCombo" onAction="#onPieChartFilterChanged" prefWidth="120.0" />
                                        <Region HBox.hgrow="ALWAYS" />
                                        <Button onAction="#onRefreshPie" text="Refresh" />
                                    </children>
                                </HBox>
                                <PieChart fx:id="pieChart" prefHeight="360.0" prefWidth="480.0" />
                            </children>
                            <padding>
                                <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
                            </padding>
                        </VBox>
                    </content>
                </Tab>
                <Tab text="Monthly Bar">
                    <content>
                        <VBox spacing="8.0">
                            <children>
                                <HBox spacing="8.0">
                                    <children>
                                        <Label text="Year:" />
                                        <ComboBox fx:id="barYearCombo" onAction="#onBarYearSelected" prefWidth="120.0" />
                                        <Region HBox.hgrow="ALWAYS" />
                                        <Button onAction="#onRefreshBar" text="Refresh Bar" />
                                    </children>
                                </HBox>
                                <BarChart fx:id="barChart" barGap="2.0" categoryGap="40.0" prefHeight="320.0" prefWidth="480.0">
                                    <xAxis>
                                        <CategoryAxis fx:id="xAxis" side="BOTTOM" />
                                    </xAxis>
                                    <yAxis>
                                        <NumberAxis fx:id="yAxis" side="LEFT" />
                                    </yAxis>
                                </BarChart>
                            </children>
                            <padding>
                                <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
                            </padding>
                        </VBox>
                    </content>
                </Tab>
                <Tab text="Predictions">
                    <content>
                        <VBox spacing="10.0">
                            <children>
                                <Label style="-fx-font-weight: bold;" text="Predict Future Expenses" />
                                <HBox alignment="CENTER_LEFT" spacing="10.0">
                                    <children>
                                        <Button onAction="#onPredictExpenses" prefHeight="35.0" text="Predict Next Month's Expenses" />
                                    </children>
                                </HBox>
                                <Label text="Prediction Results &amp; Suggestions:" />
                                <TextArea fx:id="predictionResultsArea" editable="false" prefHeight="300.0" wrapText="true" VBox.vgrow="ALWAYS" />
                            </children>
                            <padding>
                                <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
                            </padding>
                        </VBox>
                    </content>
                </Tab>
            </tabs>
        </TabPane>
    </center>
</BorderPane>